"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = wrapperRaf;
var _raf = _interopRequireDefault(require("rc-util/lib/raf"));
let id = 0;
const ids = {};
// Support call raf with delay specified frame
function wrapperRaf(callback) {
  let delayFrames = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
  const myId = id++;
  let restFrames = delayFrames;
  function internalCallback() {
    restFrames -= 1;
    if (restFrames <= 0) {
      callback();
      delete ids[myId];
    } else {
      ids[myId] = (0, _raf.default)(internalCallback);
    }
  }
  ids[myId] = (0, _raf.default)(internalCallback);
  return myId;
}
wrapperRaf.cancel = function cancel(pid) {
  if (pid === undefined) return;
  _raf.default.cancel(ids[pid]);
  delete ids[pid];
};
wrapperRaf.ids = ids; // export this for test usage